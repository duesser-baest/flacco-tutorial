<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick Start - flacco Tutorial</title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../custom-r-highlight.css" rel="stylesheet">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script>
  <script src="../js/highlight.pack.js"></script>
  <script src="../js/restrict-hljs.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> flacco Tutorial</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
        <span>Introduction</span>
            
                <li class="toctree-l1 current">
                    <a class="current" href=".">Quick Start</a>
                    
                        <ul>
                        
                            <li class="toctree-l2"><a href="#calculation-of-a-simple-feature">Calculation of a Simple Feature</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#calculation-of-expensive-features">Calculation of Expensive Features</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#calculation-of-a-cell-mapping-feature">Calculation of a Cell Mapping Feature</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#creating-explanatory-plots">Creating Explanatory Plots</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#compute-all-feature-sets-at-once">Compute all Feature Sets at Once</a></li>
                            
                        
                        </ul>
                    
                </li>
            
        

    
        
        <span>Classical ELA Features</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../ela">Classical Exploratory Landscape Analysis</a>
                    
                </li>
            
        

    
        
        <span>Cell Mapping Features</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../cm">Cell Mapping</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../gcm">Generalized Cell Mapping</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../barriertrees">Barrier Trees</a>
                    
                </li>
            
        

    
        
        <span>Extended Features</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../base">Basic Features</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../dispersion">Dispersion Features</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../ic">Information Content</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../nbf">Nearest Better Features</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../pca">Principal Component Features</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href=".."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    <li>Quick Start</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/kerschke/flacco" class="icon icon-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h1 id="calculation-of-a-simple-feature">Calculation of a Simple Feature</h1>
<p>If you want to compute any of our features, you will first have to create a feature object. This is an object, which stores all the necessary information, such as the input data and control arguments.
The easiest way to create a feature object is to pass the arguments <code>X</code> and <code>y</code> to the function <code>createFeatureObject</code>, as illustrated in the example below.</p>
<pre><code class="r">library(flacco)

## (1) Generate some example data, i.e. create an initial design 'X' consisting
## of 500 (2D) observations and compute the corresponding objective values 'y':
X = createInitialDesign(n.obs = 500, dim = 2)
y = apply(X, 1, function(x) sum(sin(x) * x^2 + (x - 0.5)^3))

## (2) Create the corresponding feature object:
feat.object = createFeatureObject(X = X, y = y)

## (3) The feature object already contains some information on your data:
print(feat.object)

## (4) Calculate a feature set, e.g. the ELA meta model features:
calculateFeatureSet(feat.object, set = &quot;ela_meta&quot;)
</code></pre>

<p>In order to find out, which feature sets can be computed, one could call the function <code>listAvailableFeatureSets</code> or have a look into the documentation of <code>calculateFeatureSets</code>. The latter one also contains a list of possible control options of each feature set.</p>
<h1 id="calculation-of-expensive-features">Calculation of Expensive Features</h1>
<p>Some feature sets (ELA convexity <code>"ela_conv"</code>, ELA curvature <code>"ela_curv"</code> and ELA local search <code>"ela_local"</code>) need to perform further function evaluations in order to compute the features. In those cases, it is necessary that the function (<code>fun</code>) is part of the feature object.
But don&#8217;t worry &#8212; if you don&#8217;t pass the function, <code>calculateFeatureSet</code> will complain and give you a hint.</p>
<p>Note, that it is also possible to pass only <code>X</code> and <code>fun</code> to <code>createFeatureObject</code>, i.e. you do not have to pass <code>y</code>. In that case, the objective values will be computed by <code>createFeatureObject</code>!</p>
<pre><code class="r">## (1) Create data
X = createInitialDesign(n.obs = 2000, dim = 5)

## (2) Compute the feature object (note that we do not set any objective values)
feat.object = createFeatureObject(X = X, fun = function(x) sum(x^2))

## (3) Have a look at feat.object
print(feat.object)

## (4) Calculate the ELA convexity features
calculateFeatureSet(feat.object, set = &quot;ela_conv&quot;)
</code></pre>

<p>Usually, you find more information on the parameters and thus on the exact number of additional function evaluations within the documentation of <code>calculateFeatureSet</code>. The following example shows you, how you could control the size of the generated sample:</p>
<pre><code class="r">## Calculate the convexity features using a sample of size 500, 
## instead of the default of 1000.
calculateFeatureSet(feat.object, set = &quot;ela_conv&quot;, control = list(ela_conv.nsample = 500))
</code></pre>

<p>A lot of our functions allow to configure certain details on how features should be computed using the <code>control</code> list parameter. However, as each function supports different parameters it is advisable to have a look into the corresponding documentation <code>?calculateFeatureSet</code>.</p>
<h1 id="calculation-of-a-cell-mapping-feature">Calculation of a Cell Mapping Feature</h1>
<p>Cell mapping features differ from the others in the fact that they convert the continuous search space into a discretized one. This is achieved by dividing the entire search space into a grid with a finite amount of cells (per dimension). Each observation will then be assigned to exactly one cell. Afterwards, each cell will be represented by one (!) of its observations. So far, we provide 3 types of representatives of a cell. For further details, you should have a look into the pages of <a href="../cm">cell mapping</a> and <a href="../gcm">generalized cell mapping</a>.</p>
<p>In order to define the grid, you need to specify the number of cells/blocks per dimension when creating a <code>FeatureObject</code>. If you don&#8217;t provide them, the attempt of computing a cell mapping feature will abort with an error.</p>
<pre><code class="r">## (1) Create data
X = createInitialDesign(n.obs = 2000, dim = 5)
y = rowSums(X^2)

## (2) Compute a feature object
feat.object = createFeatureObject(X = X, y = y, blocks = c(10, 5, 5, 8, 4))

## (3) Have a look at feat.object
print(feat.object)

## (4) Calculate cell mapping features, e.g. the gradient homogeneity features
calculateFeatureSet(feat.object, set = &quot;cm_grad&quot;)
</code></pre>

<p>The above example splits the data into 10 blocks in the first, 5 blocks in the second and third, 8 blocks in the fourth, and 4 blocks in the fifth dimension. If you always want the same amount of blocks in every dimension, you can even simplify your input:</p>
<pre><code class="r">## Compute the feature object
feat.object = createFeatureObject(X = X, y = y, blocks = 5)
</code></pre>

<h1 id="creating-explanatory-plots">Creating Explanatory Plots</h1>
<p>In addition to the features, the package provides plots, which visualize the features (or intermediate steps, which lead to the features). For example, the mechanics behind the <a href="../gcm">generalized cell mapping approach</a> are sometimes hard to grasp. In those cases, a plot, which visualizes the (two-dimensional) grid and indicates the transition probabilities from any cell to its attractor using proportional arrows, could be helpful. Such a plot can be created with the following commands (the corresponding plot is given below the R code).</p>
<pre><code class="r">library(smoof)
library(flacco)

## (1) Create data
X = expand.grid(seq(0, 1, length.out = 50), seq(0, 1, length.out = 50))
f = smoof::makeBBOBFunction(dimension = 2, fid = 17, iid = 9)
y = apply(X, 1, f)

## (2) Compute a feature object
feat.object = createFeatureObject(X = X, y = y, fun = f, blocks = c(10, 10))

## (3) Plot the corresponding cell mappings
plotCellMapping(feat.object, control = list(gcm.approach = &quot;near&quot;))
</code></pre>

<p><img alt="Cell Mapping" src="../example_cm.svg" /></p>
<p>Similarly, the <a href="../barriertrees">Barrier Tree</a> usually become more clear, when visualizing them. <strong>flacco</strong> allows its users to create 2D and 3D barrier trees. The former one look similar to the aforementioned cellmappings - extended by the branches of the tree.</p>
<pre><code class="r">## (a) a 2D plot of the barrier trees
plotBarrierTree2D(feat.object, control = list(gcm.approach = &quot;near&quot;, bt.cm_surface = FALSE))

## (b) based on a combination of the R function 'persp' and the barrier tree
## approach, one now can produce 3D plots of the barrier trees
ctrl = list(gcm.approach = &quot;near&quot;, bt.persp_border = &quot;lightgrey&quot;,
  bt.persp_theta = 35, bt.persp_phi = 25, bt.color_surface = &quot;pink&quot;,
  bt.persp_shade = 0.1, bt.persp_ticktype = &quot;simple&quot;,
  bt.persp_xlab = &quot;x&quot;, bt.persp_ylab = &quot;y&quot;, bt.persp_zlab = &quot;f(x, y)&quot;)
plotBarrierTree3D(feat.object, control = ctrl)
</code></pre>

<p><img alt="2D Barrier Tree" src="../example_bt_2d.svg" /></p>
<p><img alt="3D Barrier Tree" src="../example_bt_3d.svg" /></p>
<p>Please note, that the barrier tree features currently only work for problems with a 2D decision space. If you try to compute them for higher dimensional problems, you will receive an error.</p>
<h1 id="compute-all-feature-sets-at-once">Compute all Feature Sets at Once</h1>
<p>In case you have a feature object, which is a discretized version of a 2D input space and which provides the original function as well, you can compute all available feature sets at once &#8212; using <code>calculateFeatures</code>.</p>
<pre><code class="r">X = createInitialDesign(n.obs = 1000, dim = 2)
f = function(x) sum(x^3 * sin(x))
feat.object = createFeatureObject(X = X, fun = f, blocks = 5)
features = calculateFeatures(feat.object)
</code></pre>


            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ela" class="btn btn-neutral float-right" title="Classical Exploratory Landscape Analysis"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="flacco"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
            <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
        
      <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../ela" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>