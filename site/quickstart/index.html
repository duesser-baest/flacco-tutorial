<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

        <title>Quick Start - flacco Tutorial</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/prettify-1.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../custom-r-highlight.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">flacco Tutorial</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Introduction <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li class="active">
                            <a href=".">Quick Start</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../ela">Classical Exploratory Landscape Analysis</a>
                        </li>
                    
                        <li >
                            <a href="../cm">Cell Mapping</a>
                        </li>
                    
                        <li >
                            <a href="../gcm">Generalized Cell Mapping</a>
                        </li>
                    
                        <li >
                            <a href="../barriertrees">Barrier Trees</a>
                        </li>
                    
                        <li >
                            <a href="../dispersion">Dispersion</a>
                        </li>
                    
                        <li >
                            <a href="../ic">Information Content</a>
                        </li>
                    
                        <li >
                            <a href="../nbf">Nearest Better Clustering</a>
                        </li>
                    
                        <li >
                            <a href="../misc_features">Miscellaneous</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Miscellaneous <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../visualisations">Visualisations</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="..">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../ela">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/kerschke/flacco">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#calculation-of-a-simple-feature">Calculation of a Simple Feature</a></li>
        
    
        <li class="main "><a href="#calculation-of-expensive-features">Calculation of Expensive Features</a></li>
        
    
        <li class="main "><a href="#calculation-of-a-cell-mapping-feature">Calculation of a Cell Mapping Feature</a></li>
        
    
        <li class="main "><a href="#creating-explanatory-plots">Creating Explanatory Plots</a></li>
        
    
        <li class="main "><a href="#compute-all-feature-sets-at-once">Compute all Feature Sets at Once</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h2 id="calculation-of-a-simple-feature">Calculation of a Simple Feature</h2>
<p>If you want to compute any of our features, you will first have to create a feature object. This is an object, which stores all the necessary information, such as the input data and control arguments.
The easiest way to create a feature object is to pass the arguments <code>X</code> and <code>y</code> to the function <code>createFeatureObject</code>, as illustrated in the example below.</p>
<pre><code class="r">library(flacco)

## (1) Generate some example data, i.e. create an initial sample 'X' consisting
## of 500 (2D) observations and compute the corresponding objective values 'y':
X = createInitialSample(n.obs = 500, dim = 2)
y = apply(X, 1, function(x) sum(sin(x) * x^2 + (x - 0.5)^3))

## (2) Create the corresponding feature object:
feat.object = createFeatureObject(X = X, y = y)

## (3) The feature object already contains some information on your data:
print(feat.object)

## (4) Calculate a feature set, e.g. the ELA meta model features:
calculateFeatureSet(feat.object, set = &quot;ela_meta&quot;)
</code></pre>

<p>In order to find out, which feature sets can be computed, one could call the function <code>listAvailableFeatureSets</code> or have a look into the documentation of <code>calculateFeatureSets</code>. The latter one also contains a list of possible control options of each feature set.</p>
<h2 id="calculation-of-expensive-features">Calculation of Expensive Features</h2>
<p>Some feature sets (ELA convexity <code>"ela_conv"</code>, ELA curvature <code>"ela_curv"</code> and ELA local search <code>"ela_local"</code>) need to perform further function evaluations in order to compute the features. In those cases, it is necessary that the function (<code>fun</code>) is part of the feature object.
But don&#8217;t worry &#8212; if you don&#8217;t pass the function, <code>calculateFeatureSet</code> will complain and give you a hint.</p>
<p>Note, that it is also possible to pass only <code>X</code> and <code>fun</code> to <code>createFeatureObject</code>, i.e. you do not have to pass <code>y</code>. In that case, the objective values will be computed by <code>createFeatureObject</code>!</p>
<pre><code class="r">## (1) Create data
X = createInitialSample(n.obs = 2000, dim = 5)

## (2) Compute the feature object (note that we do not set any objective values)
feat.object = createFeatureObject(X = X, fun = function(x) sum(x^2))

## (3) Have a look at feat.object
print(feat.object)

## (4) Calculate the ELA convexity features
calculateFeatureSet(feat.object, set = &quot;ela_conv&quot;)
</code></pre>

<p>Usually, you find more information on the parameters and thus on the exact number of additional function evaluations within the documentation of <code>calculateFeatureSet</code>. The following example shows you, how you could control the size of the generated sample:</p>
<pre><code class="r">## Calculate the convexity features using a sample of size 500, 
## instead of the default of 1000.
calculateFeatureSet(feat.object, set = &quot;ela_conv&quot;, control = list(ela_conv.nsample = 500))
</code></pre>

<p>A lot of our functions allow to configure certain details on how features should be computed using the <code>control</code> list parameter. However, as each function supports different parameters it is advisable to have a look into the corresponding documentation <code>?calculateFeatureSet</code>.</p>
<h2 id="calculation-of-a-cell-mapping-feature">Calculation of a Cell Mapping Feature</h2>
<p>Cell mapping features differ from the others in the fact that they convert the continuous search space into a discretized one. This is achieved by dividing the entire search space into a grid with a finite amount of cells (per dimension). Each observation will then be assigned to exactly one cell. Afterwards, each cell will be represented by one (!) of its observations. So far, we provide 3 types of representatives of a cell. For further details, you should have a look into the pages of <a href="../cm">cell mapping</a> and <a href="../gcm">generalized cell mapping</a>.</p>
<p>In order to define the grid, you need to specify the number of cells/blocks per dimension when creating a <code>FeatureObject</code>. If you don&#8217;t provide them, the attempt of computing a cell mapping feature will abort with an error.</p>
<pre><code class="r">## (1) Create data
X = createInitialSample(n.obs = 2000, dim = 5)
y = rowSums(X^2)

## (2) Compute a feature object
feat.object = createFeatureObject(X = X, y = y, blocks = c(10, 5, 5, 8, 4))

## (3) Have a look at feat.object
print(feat.object)

## (4) Calculate cell mapping features, e.g. the gradient homogeneity features
calculateFeatureSet(feat.object, set = &quot;cm_grad&quot;)
</code></pre>

<p>The above example splits the data into 10 blocks in the first, 5 blocks in the second and third, 8 blocks in the fourth, and 4 blocks in the fifth dimension. If you always want the same amount of blocks in every dimension, you can even simplify your input:</p>
<pre><code class="r">## Compute the feature object
feat.object = createFeatureObject(X = X, y = y, blocks = 5)
</code></pre>

<h2 id="creating-explanatory-plots">Creating Explanatory Plots</h2>
<p>In addition to the features, the package provides plots, which visualize the features (or intermediate steps, which lead to the features). For example, the mechanics behind the <a href="../gcm">generalized cell mapping approach</a> are sometimes hard to grasp. In those cases, a plot, which visualizes the (two-dimensional) grid and indicates the transition probabilities from any cell to its attractor using proportional arrows, could be helpful. Such a plot can be created with the following commands (the corresponding plot is given below the R code).</p>
<pre><code class="r">library(smoof)
library(flacco)

## (1) Create data
X = expand.grid(seq(0, 1, length.out = 50), seq(0, 1, length.out = 50))
f = smoof::makeBBOBFunction(dimension = 2, fid = 17, iid = 9)
y = apply(X, 1, f)

## (2) Compute a feature object
feat.object = createFeatureObject(X = X, y = y, fun = f, blocks = c(10, 10))

## (3) Plot the corresponding cell mappings
plotCellMapping(feat.object, control = list(gcm.approach = &quot;near&quot;))
</code></pre>

<p><img alt="Cell Mapping" src="../example_cm.png" /></p>
<p>Similarly, the <a href="../barriertrees">Barrier Tree</a> usually become more clear, when visualizing them. <strong>flacco</strong> allows its users to create 2D and 3D barrier trees. The former one look similar to the aforementioned cellmappings - extended by the branches of the tree.</p>
<pre><code class="r">## (a) a 2D plot of the barrier trees
plotBarrierTree2D(feat.object, control = list(gcm.approach = &quot;near&quot;, bt.cm_surface = FALSE))

## (b) based on a combination of the R function 'persp' and the barrier tree
## approach, one now can produce 3D plots of the barrier trees
ctrl = list(gcm.approach = &quot;near&quot;, bt.persp_border = &quot;lightgrey&quot;,
  bt.persp_theta = 35, bt.persp_phi = 25, bt.color_surface = &quot;pink&quot;,
  bt.persp_shade = 0.1, bt.persp_ticktype = &quot;simple&quot;,
  bt.persp_xlab = &quot;x&quot;, bt.persp_ylab = &quot;y&quot;, bt.persp_zlab = &quot;f(x, y)&quot;)
plotBarrierTree3D(feat.object, control = ctrl)
</code></pre>

<p><img alt="2D Barrier Tree" src="../example_bt_2d.svg" /></p>
<p><img alt="3D Barrier Tree" src="../example_bt_3d.svg" /></p>
<p>Please note, that the barrier tree features currently only work for problems with a 2D decision space. If you try to compute them for higher dimensional problems, you will receive an error.</p>
<h2 id="compute-all-feature-sets-at-once">Compute all Feature Sets at Once</h2>
<p>In case you have a feature object, which is a discretized version of a 2D input space and which provides the original function as well, you can compute all available feature sets at once &#8212; using <code>calculateFeatures</code>.</p>
<pre><code class="r">X = createInitialSample(n.obs = 1000, dim = 2)
f = function(x) sum(x^3 * sin(x))
feat.object = createFeatureObject(X = X, fun = f, blocks = 5)
features = calculateFeatures(feat.object)
</code></pre>

</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/prettify-1.0.min.js"></script>
        <script src="../js/base.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/restrict-hljs.js"></script>
    </body>
</html>